(this.webpackJsonpchat_test_task=this.webpackJsonpchat_test_task||[]).push([[0],{100:function(e,t,n){e.exports={container:"App_container__3Qxbl"}},101:function(e,t,n){e.exports={container:"Background_container__3t8Hr"}},104:function(e,t,n){e.exports={container:"Header_container__2DZh4"}},109:function(e,t,n){e.exports={container:"Chat_container__3QsnG"}},137:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(32),c=n.n(r),o=(n(137),n(16)),i=n(100),u=n.n(i),j=n(101),l=n.n(j),O=n(203),d=n(3);var b=function(e){var t=e.children;return Object(d.jsx)(O.a,{className:l.a.container,children:t})},g=n(104),f=n.n(g),m=n(105),_=n.n(m);var h=function(){return Object(d.jsxs)(O.a,{className:f.a.container,children:[Object(d.jsx)(_.a,{color:"primary",fontSize:"medium",onClick:function(){throw new Error("Oh no!")}}),Object(d.jsx)("h1",{children:"Web Chat"})]})},p=n(88),x=n.n(p),v=n(196),y=n(206),S=n(108),E=n.n(S),M=n(28),I=n(21),w=n(29),N="ADD_MESSAGE",U="INITIALIZE_MESSAGES",L="LOAD_MORE_MESSAGES",D={messagesList:[]},C=function(e,t){return function(n,s){var a=s().messagesInfo.messagesList,r=[].concat(Object(I.a)(a),[{user:e,message:t}]);localStorage.setItem("messagesList",JSON.stringify(r)),n(function(e,t){return{type:N,payload:{user:e,message:t}}}(e,t))}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(w.a)(Object(w.a)({},e),{},{messagesList:[].concat(Object(I.a)(e.messagesList),[{user:t.payload.user,message:t.payload.message}])});case U:return Object(w.a)(Object(w.a)({},e),{},{messagesList:t.payload});case L:return Object(w.a)(Object(w.a)({},e),{},{messages:[]});default:return e}};var A=function(){var e=Object(M.c)(),t=Object(M.d)((function(e){return e.usersInfo.currentUser})),n=Object(s.useState)(""),a=Object(o.a)(n,2),r=a[0],c=a[1];return Object(d.jsxs)(O.a,{className:x.a.container,children:[Object(d.jsx)(v.a,{onChange:function(e){return c(e.target.value)},fullWidth:!0,placeholder:"Type a message...",variant:"outlined"}),Object(d.jsx)(y.a,{color:"primary",onClick:function(){return e(C(t,r))},children:Object(d.jsx)(E.a,{className:x.a.sendIcon,style:{fontSize:"30px"}})})]})},B=n(202),T=n(201),z=n(208),G=n(209),J=n(207),Q="ADD_USER",R={currentUser:null},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;return t.type===Q?Object(w.a)(Object(w.a)({},e),{},{currentUser:t.payload}):e},H=function(e){var t=e.open,n=e.setIsDialogOpened,a=Object(s.useState)(""),r=Object(o.a)(a,2),c=r[0],i=r[1],u=Object(M.c)();return Object(d.jsxs)(J.a,{open:t,children:[Object(d.jsx)(T.a,{children:"Please, Enter Username"}),Object(d.jsx)(z.a,{dividers:!0,children:Object(d.jsx)(v.a,{onChange:function(e){return i(e.target.value)},variant:"outlined"})}),Object(d.jsx)(G.a,{children:Object(d.jsx)(B.a,{onClick:function(){var e;n(!1),u((e=c,sessionStorage.setItem("currentUser",e),{type:Q,payload:e}))},children:"Save"})})]})},P=n(109),X=n.n(P),Z=n(51),F=n.n(Z),V=function(e){var t=e.username,n=e.message,s=Object(M.d)((function(e){return e.usersInfo.currentUser}));return Object(d.jsxs)(O.a,{className:F.a.container,children:[Object(d.jsx)(O.a,{className:"".concat(t===s?F.a.ownMessageBody:F.a.anotherMessageBody),children:Object(d.jsx)("p",{className:F.a.messageText,children:n})}),Object(d.jsx)("p",{className:F.a.username,children:t})]})};var Y=function(e){var t=e.initializeMessages,n=Object(M.d)((function(e){return e.messagesInfo.messagesList}));return Object(s.useEffect)((function(){return window.addEventListener("storage",(function(){t()})),function(){window.removeEventListener("storage",(function(){t()}))}}),[]),Object(d.jsx)(O.a,{className:X.a.container,children:n.map((function(e){return Object(d.jsx)(V,{username:e.user,message:e.message})}))})};var q=Object(M.b)((function(e){return{currentUser:e.usersInfo.currentUser}}),(function(e){return{initializeMessages:function(){var t=function(){var e=JSON.parse(localStorage.getItem("messagesList"))||[];return{type:U,payload:e}}();e(t)},getCurrentUser:function(){var t=function(){var e=sessionStorage.getItem("currentUser")||null;return{type:Q,payload:e}}();e(t)}}}))((function(e){var t=e.currentUser,n=e.getCurrentUser,a=e.initializeMessages,r=Object(s.useState)(!1),c=Object(o.a)(r,2),i=c[0],j=c[1];return Object(s.useEffect)((function(){n(),a(),j(!t)}),[t,n,a]),Object(d.jsx)(O.a,{className:u.a.container,children:Object(d.jsxs)(b,{children:[Object(d.jsx)(h,{}),Object(d.jsx)(H,{open:i,setIsDialogOpened:j}),Object(d.jsx)(Y,{initializeMessages:a}),Object(d.jsx)(A,{})]})})})),K=n(195),$=n(197),ee=n(60),te=n(110),ne=Object(ee.b)({usersInfo:W,messagesInfo:k}),se=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ee.c,ae=Object(ee.d)(ne,se(Object(ee.a)(te.a)));K.a({dsn:"https://ff793a6930cc4f28b7a7b7dc81bd2933@o1212986.ingest.sentry.io/6351600",integrations:[new $.a],tracesSampleRate:1}),c.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(M.a,{store:ae,children:Object(d.jsx)(q,{})})}),document.getElementById("root"))},51:function(e,t,n){e.exports={container:"Message_container__3QY56",messageText:"Message_messageText__1-4DW",ownMessageBody:"Message_ownMessageBody__1lQW_",anotherMessageBody:"Message_anotherMessageBody__2-02l",username:"Message_username__1bfxo"}},88:function(e,t,n){e.exports={container:"Footer_container__37cvy"}}},[[144,1,2]]]);
//# sourceMappingURL=main.1d15a3cd.chunk.js.map